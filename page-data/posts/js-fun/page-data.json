{"componentChunkName":"component---src-templates-post-template-jsx","path":"/posts/js-fun/","result":{"data":{"site":{"siteMetadata":{"title":"ThuyLe - Expresspedia Blog","subtitle":"I'm a full-stack web developer with experience in <code>#JavaScript</code>, <code>#Website Design</code>, <code>#Object-Oriented programming</code> and <code>more</code>.","copyright":"2020 © All rights reserved.","author":{"name":"Hi, I am Thuy Le","twitter":"#"},"disqusShortname":"","url":"https://lumen.netlify.com"}},"markdownRemark":{"id":"c3dfb30b-fef2-5a3b-ad77-d245b26bd77c","html":"<p>Xin chào mọi người, trong quá trình làm việc với JavaScript, mình có gặp nhiều trường hợp hay ho trong JavaScript, nay mình tổng hợp lại đây.</p>\n<h2>Nested object ?</h2>\n<p>Cùng xem qua ví dụ sau</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> objTest <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token string\">\"knowledge_graph\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token string\">\"source\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t\t\t<span class=\"token string\">\"link\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://www.youtube.com/\"</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">let</span> <span class=\"token punctuation\">{</span> knowledge_graph <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span> <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> objTest\n<span class=\"token keyword\">let</span> urlLogo <span class=\"token operator\">=</span> knowledge_graph<span class=\"token punctuation\">.</span>source <span class=\"token operator\">&amp;&amp;</span> knowledge_graph<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span>link <span class=\"token operator\">?</span> knowledge_graph<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span>link <span class=\"token operator\">:</span> <span class=\"token string\">'NA'</span>\n\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span>urlLogo<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Kết quả chắc chắn rồi</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token string\">\"https://www.youtube.com/\"</span></code></pre></div>\n<p>Nhưng, đến lúc xử lý với object sau đây</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">var</span> objTest <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token string\">\"knowledge_graph\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token string\">\"source\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"https://www.youtube.com/\"</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>Theo bạn, kết quả có phải là <code class=\"language-text\">&#39;NA&#39;</code> hay không? Cùng chạy thử ví dụ, xem kết quả thu được là gì?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token punctuation\">[</span>Function<span class=\"token operator\">:</span> link<span class=\"token punctuation\">]</span></code></pre></div>\n<p>Tại sao lại có kết quả này? Sau một hồi debug, mình phát hiện ra rằng, trong <code class=\"language-text\">String</code> có 1 <code class=\"language-text\">prototype</code> là <code class=\"language-text\">link</code>, bạn có thể tham khảo tại <a href=\"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/link\">đây</a>. Do đó, khi bạn sử dụng</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">knowledge_graph<span class=\"token punctuation\">.</span>source<span class=\"token punctuation\">.</span>link</code></pre></div>\n<p>Vì <code class=\"language-text\">source</code> không có <code class=\"language-text\">key</code> <code class=\"language-text\">link</code> nên built-in <code class=\"language-text\">link</code> function trong <code class=\"language-text\">String</code> sẽ được sử dụng, dẫn đến nó sẽ trả về <code class=\"language-text\">Function</code>.</p>\n<p>Khắc phục điều này như thế nào? Rất đơn giản, ta cần overwrite prototype đó, như ví dụ sau, mình không cần dùng hàm <code class=\"language-text\">link</code> này, nên mình sẽ viết như sau</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token class-name\">String</span><span class=\"token punctuation\">.</span>prototype<span class=\"token punctuation\">.</span>link <span class=\"token operator\">=</span> <span class=\"token keyword\">null</span><span class=\"token punctuation\">;</span></code></pre></div>\n<h2>Cộng hai số trong JS</h2>\n<p>Bạn hãy thử viết 1 <code class=\"language-text\">function</code> cộng 2 số nguyên (<code class=\"language-text\">int</code>) trong JS. Rất đơn giản phải không?</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span>b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> a <span class=\"token operator\">+</span> b</code></pre></div>\n<p>Rồi, hãy chạy thử các cases sau đây</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">'1'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'2'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'1'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">null</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\nconsole<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">undefined</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>Kết quả sẽ là</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token number\">3</span>\n<span class=\"token number\">12</span>\n<span class=\"token number\">12</span>\n<span class=\"token punctuation\">[</span>object Object<span class=\"token punctuation\">]</span><span class=\"token number\">1</span>\n<span class=\"token number\">1</span>\n<span class=\"token number\">NaN</span></code></pre></div>\n<p>Nhìn vào kết quả, có lẽ bạn đã biết mình bỏ sót bước nào, đó chính là xử lý đầu vào trước khi thực hiện phép cộng:</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span>b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token function\">parseInt</span><span class=\"token punctuation\">(</span>b<span class=\"token punctuation\">)</span></code></pre></div>\n<p>Ok, vậy có cách nào viết gọn hơn không mà vẫn áp dụng được cho cả số nguyên (<code class=\"language-text\">int</code>) lẫn thập phân (<code class=\"language-text\">float</code>).</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">add</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">a<span class=\"token punctuation\">,</span>b</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token operator\">+</span>a <span class=\"token operator\">+</span> <span class=\"token operator\">+</span>b</code></pre></div>\n<p>Cách <code class=\"language-text\">{ đơn giản, gọn }</code> nhất để biến 1 chuỗi thành 1 số là thêm vào <code class=\"language-text\">+</code> trước nó.</p>\n<p>Cập nhật hằng ngày…</p>","fields":{"tagSlugs":["/tags/js/","/tags/fun/"],"slug":"/posts/js-fun/"},"frontmatter":{"title":"JS fun","tags":["JS","Fun"],"date":"2020-02-26T20:08:00.000Z","description":"Cùng tìm hiểu một số điều thú vị trong JavaScript"}}},"pageContext":{"slug":"/posts/js-fun/"}}}